
# FPN
**paper:**[Feature Pyramid Networks for Object Detection](https://arxiv.org/abs/1612.03144)`CVPR2017`

## Abstract
特征金字塔(Feature Pyramid)是识别系统中用于检测不同尺度目标的基本组件。最近的深度学习目标检测器已经避免了金字塔表示，部分原因是它们是计算和内存密集型的。在本文中，利用深度卷积网络内在的多尺度、金字塔分级来构造具有很少额外成本的特征金字塔。开发了一种具有横向连接的自顶向下架构(A top-down architecture with lateral connections)，用于在所有尺度上构建高级语义特征映射。这种称为特征金字塔网络（FPN）的架构在应用中作为通用特征提取器表现出了显著的改进。在一个基本的Faster R-CNN系统中使用FPN，该方法可以在COCO检测基准数据集上取得最先进的单模型结果，结果超过了所有现有的单模型输入，包括COCO 2016挑战赛的获奖者。此外，该方法可以在GPU上以6FPS运行，因此是多尺度目标检测的实用和准确的解决方案。

## Contribution

![network](image/framenetwork.png)

提出了特征金字塔网络（FPN）的三个主要部分：
- Bottom-up Pathway：卷积网络的前馈计算，由不同比例的特征映射组成的特征层级，paper中利用残差块conv2、conv3、conv4、conv5的输出，记为{C2,C3,C4,C5}，它们相对于输入图像的步长分别为{4,8,16,32}。
- Top-down Pathway：通过在空间上更抽象但语义更强的高层特征图进行上采样来幻化高分辨率的特征，随后通过横向连接从底向上路径，使得高层特征得到增强，即将低分辨率的特征图做2倍上采样（paper中说为简单使用最近邻上采样），然后通过按元素相加，将上采样映射与相应的自底向上特征合并，最后每层都附加一个3×3卷积来生成最终特征映射，这是为了减少上采样的混叠效应。最终，得到的特征映射集为{P2,P3,P4,P5}，分别对应于{C2,C3,C4,C5}，并且对应的具有相同的尺寸。
- Lateral Connection：横向连接，即将自底向上的层进行1×1的卷积。采用1×1的卷积是为了减少特征图的数量，paper中使用的是256维的特征。

由此，可以将FPN网络分别作用到RPN网络和Fast RCNN中，以达到高效的检测效果。需要注意，网络的predict是在自上而下的每个特征图上都预测，即{P2,P3,P4,P5}。

